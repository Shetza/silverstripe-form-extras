/* Chosen Order v1.0.0 | (c) 2013 by Tristan Jahier, http://tristan-jahier.fr */
(function(){var a,b,c,d=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};b=function(){function a(){}var b,c,e,f,g,h,i;return b={invalid_select_element:"ChosenOrder::{{function}}: first argument must be a valid HTML Multiple Select element that has been Chosenified!",invalid_selection_array:"ChosenOrder::{{function}}: second argument must be an Array!",unreachable_chosen_container:'ChosenOrder::{{function}}: could not find the Chosen UI container! To solve the problem, try adding an "id" attribute to your <select> element.'},g=function(a,b,c){return c.insertBefore(a,c.children[b].nextSibling)},f=function(a){var b,c,d,e,f,g,h,i,j;for(d=Array.prototype.filter.call(a.childNodes,function(a){var b;return"OPTION"===(b=a.nodeName.toUpperCase())||"OPTGROUP"===b}),b=[],g=0,i=d.length;i>g;g++)if(c=d[g],b.push(c),"OPTGROUP"===c.nodeName.toUpperCase())for(f=Array.prototype.filter.call(c.childNodes,function(a){return"OPTION"===a.nodeName.toUpperCase()}),h=0,j=f.length;j>h;h++)e=f[h],b.push(e);return b},i=function(a){return null!==a&&"undefined"!=typeof a&&"SELECT"===a.nodeName&&a.multiple},e=function(a){return""!==a.id?document.getElementById(a.id.replace(/-/g,"_")+"_chosen"):searchChosenUIContainer(a)},h=function(a){return null!=e(a)},c=function(a){var b,c,e,g;for(e=f(this),b=0;b<e.length;)c=e[b],g=c.getAttribute("value"),d.call(a,g)>=0?(c.selected=!0,c.setAttribute("selected","")):(c.selected=!1,c.removeAttribute("selected")),b++;return triggerEvent(this,"chosen:updated")},a.getSelectionOrder=function(a){var c,d,g,h,j,k,l,m,n,o;if("undefined"!=typeof getDOMElement&&null!==getDOMElement&&(a=getDOMElement(a)),l=[],!i(a))return console.error(b.invalid_select_element.replace("{{function}}","getSelectionOrder")),l;if(d=e(a),null==d)return console.error(b.unreachable_chosen_container.replace("{{function}}","getSelectionOrder")),l;for(c=d.querySelectorAll(".search-choice"),k=f(a),n=0,o=c.length;o>n;n++)h=c[n],g=h.querySelectorAll(".search-choice-close")[0],null!=g&&(m=g.getAttribute(this.relAttributeName)),j=k[m],l.push(j.value);return l},a.setSelectionOrder=function(a,d,h){var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;if("undefined"!=typeof getDOMElement&&null!==getDOMElement&&(a=getDOMElement(a)),!i(a))return void console.error(b.invalid_select_element.replace("{{function}}","setSelectionOrder"));if(l=e(a),null==l)return void console.error(b.unreachable_chosen_container.replace("{{function}}","setSelectionOrder"));if(d instanceof Array){for(d=d.map(Function.prototype.call,String.prototype.trim),r=f(a),null!=h&&h===!0&&c.call(a,d),y=[],m=u=0,w=d.length;w>u;m=++u){for(p=d[m],s=null,n=v=0,x=r.length;x>v;n=++v)o=r[n],o.value===p&&(s=n);k=l.querySelectorAll(".search-choice"),t=this.relAttributeName,q=Array.prototype.filter.call(k,function(a){return null!=a.querySelector("a.search-choice-close["+t+'="'+s+'"]')})[0],j=l.querySelector("ul.chosen-choices"),y.push(g(q,m,l.querySelector("ul.chosen-choices")))}return y}return console.error(b.invalid_selection_array.replace("{{function}}","setSelectionOrder"))},a}(),a=jQuery,a.fn.extend({getSelectionOrder:function(){return ChosenOrder.getSelectionOrder(this)},setSelectionOrder:function(a,b){return ChosenOrder.setSelectionOrder(this,a,b)}}),this.ChosenOrder=function(b){function d(){return c=d.__super__.constructor.apply(this,arguments)}var e;return f(d,b),d.relAttributeName="data-option-array-index",e=function(a){return"undefined"!=typeof jQuery&&null!==jQuery&&a instanceof jQuery},parent.getDOMElement=function(a){return e(a)?a.get(0):a},parent.searchChosenUIContainer=function(b){return null!=a(b).data("chosen")?a(b).data("chosen").container[0]:a(b).next(".chosen-container.chosen-container-multi").get(0)},parent.triggerEvent=function(b,c){return a(b).trigger(c)},d}(b)}).call(this);